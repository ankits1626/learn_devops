# 0.5.2 DHCP and CIDR Explained

> How devices get IP addresses and how networks define their size

---

## Part 1: DHCP (Dynamic Host Configuration Protocol)

### What is DHCP?

**DHCP** is like a **receptionist that hands out room keys** at a hotel. When your device joins a network, DHCP automatically gives it an IP address.

```text
┌─────────────────────────────────────────────────────────────────┐
│                    DHCP EXPLAINED                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   WITHOUT DHCP (Manual):                                        │
│   ─────────────────────                                         │
│   You: "I want to connect to the network"                       │
│   You: *manually types IP: 192.168.1.50*                        │
│   You: *manually types netmask: 255.255.255.0*                  │
│   You: *manually types gateway: 192.168.1.1*                    │
│   You: *manually types DNS: 8.8.8.8*                            │
│                                                                 │
│   Problem: What if someone else already has .50? CONFLICT!      │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   WITH DHCP (Automatic):                                        │
│   ──────────────────────                                        │
│   Your device: "Hey network! I need an IP address!"             │
│   DHCP Server: "Here, take 192.168.1.19, it's free!"            │
│   DHCP Server: "Your gateway is 192.168.1.1"                    │
│   DHCP Server: "Your DNS is 8.8.8.8"                            │
│   DHCP Server: "This lease expires in 24 hours"                 │
│                                                                 │
│   Your device: *automatically configured* ✓                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### The DHCP Conversation (4-Step Dance)

When your device connects to a network, this happens:

```text
┌─────────────────────────────────────────────────────────────────┐
│                 DHCP: 4-STEP PROCESS (DORA)                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Your Device                           Router (DHCP Server)    │
│       │                                        │                │
│       │  1. DISCOVER                           │                │
│       │  "Is there a DHCP server out there?"   │                │
│       │  (broadcast to everyone)               │                │
│       │ ─────────────────────────────────────▶ │                │
│       │                                        │                │
│       │  2. OFFER                              │                │
│       │  "Yes! I have 192.168.1.19 available"  │                │
│       │ ◀───────────────────────────────────── │                │
│       │                                        │                │
│       │  3. REQUEST                            │                │
│       │  "I'll take 192.168.1.19 please"       │                │
│       │ ─────────────────────────────────────▶ │                │
│       │                                        │                │
│       │  4. ACK (Acknowledge)                  │                │
│       │  "Done! It's yours for 24 hours"       │                │
│       │ ◀───────────────────────────────────── │                │
│       │                                        │                │
│                                                                 │
│   Remember: D-O-R-A (Discover, Offer, Request, Acknowledge)     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### What DHCP Gives You

| Setting | Example | Purpose |
|---------|---------|---------|
| **IP Address** | 192.168.1.19 | Your unique address on the network |
| **Subnet Mask** | 255.255.255.0 | Defines what's "local" vs "remote" |
| **Default Gateway** | 192.168.1.1 | Router to reach the internet |
| **DNS Server** | 8.8.8.8 | Translates names (google.com) to IPs |
| **Lease Time** | 24 hours | How long you keep this IP |

---

### DHCP Lease Lifecycle

```text
┌─────────────────────────────────────────────────────────────────┐
│                    DHCP LEASE LIFECYCLE                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Time 0:00                                                     │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Device gets IP 192.168.1.19                            │   │
│   │  Lease: 24 hours                                        │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│   Time 12:00 (50% of lease)                                     │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Device: "Can I keep 192.168.1.19?"                     │   │
│   │  DHCP: "Yes, renewed for another 24 hours"              │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│   If device disconnects and doesn't renew:                      │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Time 24:00: Lease expires                              │   │
│   │  192.168.1.19 goes back to the pool                     │   │
│   │  Can be given to another device                         │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Real-World Analogy: Hotel Check-In

```text
┌─────────────────────────────────────────────────────────────────┐
│                    HOTEL ANALOGY                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   DHCP Server = Hotel front desk                                │
│   IP Address  = Room number                                     │
│   Lease       = How long you booked the room                    │
│   Gateway     = Hotel lobby (exit to the world)                 │
│   DNS         = Concierge (helps you find places)               │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   You: "I need a room" (DISCOVER)                               │
│   Desk: "Room 19 is available" (OFFER)                          │
│   You: "I'll take room 19" (REQUEST)                            │
│   Desk: "Here's your key, checkout is tomorrow" (ACK)           │
│                                                                 │
│   You don't pick your room number - the hotel assigns it!       │
│   That's exactly how DHCP works.                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Hands-On: See Your DHCP-Assigned Settings

```bash
# On Mac, see your current network settings
ipconfig getpacket en0

# Or see just the IP info
ifconfig en0 | grep "inet "

# See your default gateway (router)
netstat -nr | grep default

# See your DNS servers
scutil --dns | grep "nameserver"
```

---

## Part 2: CIDR (Classless Inter-Domain Routing)

### What is CIDR?

**CIDR** is a compact way to write "this IP address and network size together."

```text
┌─────────────────────────────────────────────────────────────────┐
│                    CIDR NOTATION                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   192.168.1.0/24                                                │
│   ─────────── ──                                                │
│       │        │                                                │
│       │        └── Network size (how many addresses)            │
│       │                                                         │
│       └─────────── Starting IP address                          │
│                                                                 │
│   It's like saying:                                             │
│   "My network is 192.168.1.x with 256 addresses"                │
│                                                                 │
│   Instead of writing:                                           │
│   "IP: 192.168.1.0, Netmask: 255.255.255.0"                     │
│                                                                 │
│   You just write:                                               │
│   "192.168.1.0/24"                                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Why "Classless Inter-Domain Routing"?

The name tells a story. Before CIDR (pre-1993), the internet used **"Classful" addressing** which was incredibly wasteful.

#### The Old "Classful" System

```text
┌─────────────────────────────────────────────────────────────────┐
│              THE OLD CLASSFUL ERA (1981-1993)                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Networks could ONLY be one of THREE sizes:                    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────────┐ │
│   │  CLASS A:  /8   = 16,777,214 addresses                    │ │
│   │            Given to: Very large organizations             │ │
│   │            Example: IBM, AT&T, US Military               │ │
│   └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│   ┌───────────────────────────────────────────────────────────┐ │
│   │  CLASS B:  /16  = 65,534 addresses                        │ │
│   │            Given to: Medium organizations                 │ │
│   │            Example: Universities, large companies         │ │
│   └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│   ┌───────────────────────────────────────────────────────────┐ │
│   │  CLASS C:  /24  = 254 addresses                           │ │
│   │            Given to: Small organizations                  │ │
│   │            Example: Small businesses                      │ │
│   └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│   NO OTHER SIZES EXISTED!                                       │
│   You couldn't get a /20 or /22 - only /8, /16, or /24         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### The Massive Waste Problem

```text
┌─────────────────────────────────────────────────────────────────┐
│              WHY CLASSFUL WAS A DISASTER                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Company: "I need 1,000 IP addresses for my network"           │
│                                                                 │
│   Class C (/24): Only 254 addresses → TOO SMALL! ✗              │
│   Class B (/16): 65,534 addresses   → WAY TOO BIG! ✗            │
│                                                                 │
│   Result: Company gets Class B (65,534 addresses)               │
│           Uses only 1,000                                       │
│           WASTES 64,534 addresses!                              │
│                                                                 │
│   ┌───────────────────────────────────────────────────────────┐ │
│   │  CLASS B ALLOCATION                                       │ │
│   │  ▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │ │
│   │  ▓▓ = Used (1,000)                                        │ │
│   │  ░░ = Wasted (64,534)                                     │ │
│   │                                                           │ │
│   │  That's 98.5% WASTE!                                      │ │
│   └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│   This happened EVERYWHERE. IPv4 addresses were running out!    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### CIDR: The Solution (1993)

```text
┌─────────────────────────────────────────────────────────────────┐
│              CIDR ELIMINATES CLASSES                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   CIDR says: "Forget classes! Use ANY size you need!"           │
│                                                                 │
│   Company: "I need 1,000 IP addresses"                          │
│   CIDR:    "Here's a /22 with 1,022 addresses. Perfect fit!"    │
│                                                                 │
│   ┌───────────────────────────────────────────────────────────┐ │
│   │  Available sizes with CIDR:                               │ │
│   │                                                           │ │
│   │  /22 = 1,022 addresses    (need ~1000? use this!)         │ │
│   │  /23 = 510 addresses      (need ~500? use this!)          │ │
│   │  /25 = 126 addresses      (need ~100? use this!)          │ │
│   │  /27 = 30 addresses       (need ~25? use this!)           │ │
│   │  /29 = 6 addresses        (need ~5? use this!)            │ │
│   │                                                           │ │
│   │  ANY size from /1 to /32!                                 │ │
│   └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│   "Classless" = No more Class A, B, C restrictions              │
│   "Inter-Domain" = Works between different networks (routing)   │
│   "Routing" = How packets find their destination                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### Visual Comparison

```text
┌─────────────────────────────────────────────────────────────────┐
│              CLASSFUL vs CIDR                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   CLASSFUL (Before 1993):                                       │
│   Only 3 sizes like clothing: S, M, L                           │
│                                                                 │
│   Need    Got         Waste                                     │
│   ────    ───         ─────                                     │
│   500     Class C     Can't! Too small, forced to Class B       │
│   1000    Class B     64,534 addresses wasted                   │
│   70000   Class A     16 million addresses wasted               │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   CIDR (After 1993):                                            │
│   Custom tailored sizes for everyone                            │
│                                                                 │
│   Need    Get         Waste                                     │
│   ────    ───         ─────                                     │
│   500     /23         ~10 addresses                             │
│   1000    /22         ~22 addresses                             │
│   70000   /15         ~62 addresses                             │
│                                                                 │
│   Much more efficient!                                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### Route Aggregation (Bonus Benefit)

```text
┌─────────────────────────────────────────────────────────────────┐
│              CIDR ENABLES ROUTE AGGREGATION                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Classful (many routes):                                       │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Route 1: 192.168.0.0/24  → ISP-A                       │   │
│   │  Route 2: 192.168.1.0/24  → ISP-A                       │   │
│   │  Route 3: 192.168.2.0/24  → ISP-A                       │   │
│   │  Route 4: 192.168.3.0/24  → ISP-A                       │   │
│   │  (4 separate routes to remember)                        │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│   CIDR (one aggregated route):                                  │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Route: 192.168.0.0/22  → ISP-A                         │   │
│   │  (1 route covers all 4 networks!)                       │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│   This keeps internet routing tables manageable!                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Understanding the /Number

An IP address is **32 bits** long. The `/number` tells you how many bits are **locked** (the network part).

```text
┌─────────────────────────────────────────────────────────────────┐
│              IP ADDRESS = 32 BITS                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   IP: 192.168.1.19                                              │
│                                                                 │
│   In binary (32 bits total):                                    │
│                                                                 │
│   192      .  168      .  1        .  19                        │
│   11000000    10101000    00000001    00010011                  │
│   ────────    ────────    ────────    ────────                  │
│    8 bits      8 bits      8 bits      8 bits                   │
│                                                                 │
│   Total: 8 + 8 + 8 + 8 = 32 bits                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### What /24, /16, /8 Mean

```text
┌─────────────────────────────────────────────────────────────────┐
│              THE /NUMBER EXPLAINED                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   /24 = First 24 bits locked, last 8 bits free                  │
│   ──────────────────────────────────────────                    │
│                                                                 │
│   192.168.1.0/24                                                │
│   ┌────────────────────────┬────────┐                           │
│   │ 24 bits LOCKED         │ 8 FREE │                           │
│   │ (network part)         │(hosts) │                           │
│   └────────────────────────┴────────┘                           │
│   192  .  168  .  1        .  ???                               │
│   ───────────────────────     ───                               │
│   FIXED (can't change)        0-255                             │
│                                                                 │
│   Free bits: 8 → 2^8 = 256 addresses (254 usable)               │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   /16 = First 16 bits locked, last 16 bits free                 │
│   ───────────────────────────────────────────                   │
│                                                                 │
│   10.244.0.0/16                                                 │
│   ┌────────────────┬────────────────┐                           │
│   │ 16 bits LOCKED │ 16 bits FREE   │                           │
│   │ (network)      │ (hosts)        │                           │
│   └────────────────┴────────────────┘                           │
│   10   .  244      .  ???  .  ???                               │
│   ─────────────       ───────────                               │
│   FIXED               Both 0-255                                │
│                                                                 │
│   Free bits: 16 → 2^16 = 65,536 addresses (65,534 usable)       │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   /8 = First 8 bits locked, last 24 bits free                   │
│   ──────────────────────────────────────────                    │
│                                                                 │
│   10.0.0.0/8                                                    │
│   ┌────────┬────────────────────────┐                           │
│   │8 LOCKED│ 24 bits FREE           │                           │
│   └────────┴────────────────────────┘                           │
│   10       .  ???  .  ???  .  ???                               │
│   ──          ───────────────────                               │
│   FIXED       All three 0-255                                   │
│                                                                 │
│   Free bits: 24 → 2^24 = 16,777,216 addresses!                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Visual Size Comparison

```text
┌─────────────────────────────────────────────────────────────────┐
│              NETWORK SIZE COMPARISON                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   /24 (Your home: 192.168.1.0/24)                               │
│   ┌────────────────────────────┬────────┐                       │
│   │    Network (fixed)         │ Device │                       │
│   │    192.168.1               │  .x    │                       │
│   └────────────────────────────┴────────┘                       │
│   Range: 192.168.1.0 - 192.168.1.255                            │
│   Usable: 254 devices                                           │
│   Like: A single apartment building                             │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   /16 (Kubernetes pods: 10.244.0.0/16)                          │
│   ┌────────────────┬────────────────────┐                       │
│   │ Network (fixed)│    Device          │                       │
│   │    10.244      │     .x.x           │                       │
│   └────────────────┴────────────────────┘                       │
│   Range: 10.244.0.0 - 10.244.255.255                            │
│   Usable: 65,534 devices                                        │
│   Like: A whole neighborhood                                    │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   /8 (Large enterprise: 10.0.0.0/8)                             │
│   ┌────────┬────────────────────────────┐                       │
│   │Network │        Device              │                       │
│   │  10    │         .x.x.x             │                       │
│   └────────┴────────────────────────────┘                       │
│   Range: 10.0.0.0 - 10.255.255.255                              │
│   Usable: 16,777,214 devices                                    │
│   Like: An entire city                                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### The Key Rule

```text
┌─────────────────────────────────────────────────────────────────┐
│              THE INVERSE RELATIONSHIP                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   SMALLER /number = BIGGER network (more addresses)             │
│   LARGER /number  = SMALLER network (fewer addresses)           │
│                                                                 │
│   /8  ████████████████████████████████ 16 million addresses     │
│   /16 ████████████████                 65,534 addresses         │
│   /24 ████                             254 addresses            │
│   /32 █                                1 address                │
│                                                                 │
│   Think of it like:                                             │
│   /8  = Whole country                                           │
│   /16 = One city                                                │
│   /24 = One street                                              │
│   /32 = One house                                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### CIDR vs Old Netmask Style

CIDR is just a shorter way to write the same thing:

```text
┌─────────────────────────────────────────────────────────────────┐
│              SAME THING, TWO WAYS TO WRITE IT                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Old style (verbose):              CIDR style (compact):       │
│   ────────────────────              ────────────────────        │
│   IP: 192.168.1.0                   192.168.1.0/24              │
│   Netmask: 255.255.255.0                                        │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   Conversion table:                                             │
│                                                                 │
│   CIDR    Netmask           Usable IPs                          │
│   ────    ───────────────   ──────────                          │
│   /8      255.0.0.0         16,777,214                          │
│   /16     255.255.0.0       65,534                              │
│   /24     255.255.255.0     254                                 │
│   /25     255.255.255.128   126                                 │
│   /26     255.255.255.192   62                                  │
│   /27     255.255.255.224   30                                  │
│   /28     255.255.255.240   14                                  │
│   /29     255.255.255.248   6                                   │
│   /30     255.255.255.252   2                                   │
│   /32     255.255.255.255   1                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Why Two Addresses Are Always Reserved

```text
┌─────────────────────────────────────────────────────────────────┐
│              RESERVED ADDRESSES                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   In any network, 2 addresses are reserved:                     │
│                                                                 │
│   192.168.1.0/24 has 256 addresses (0-255)                      │
│                                                                 │
│   192.168.1.0   = Network address    (identifies the network)   │
│   192.168.1.255 = Broadcast address  (send to everyone)         │
│                                                                 │
│   Usable: 256 - 2 = 254 addresses                               │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   That's why:                                                   │
│   /24 = 256 total,  254 usable                                  │
│   /16 = 65,536 total, 65,534 usable                             │
│   /8  = 16,777,216 total, 16,777,214 usable                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Part 3: CIDR in Kubernetes

### Why Kubernetes Uses Large Networks

```text
┌─────────────────────────────────────────────────────────────────┐
│              KUBERNETES NETWORK REQUIREMENTS                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   A production cluster might have:                              │
│                                                                 │
│   • 100 nodes                                                   │
│   • 50 pods per node                                            │
│   • Total: 5,000 pods needing IPs                               │
│                                                                 │
│   With /24 (254 IPs): NOT ENOUGH! ✗                             │
│   With /16 (65,534 IPs): Plenty of room! ✓                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### Kubernetes Network CIDRs

```text
┌─────────────────────────────────────────────────────────────────┐
│              CIDR IN KUBERNETES                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Pod Network (where pods get IPs):                             │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  10.244.0.0/16                                          │   │
│   │  └─ 65,534 possible pod IPs                             │   │
│   │                                                         │   │
│   │  Node 1 gets: 10.244.1.0/24 (254 pods)                  │   │
│   │  Node 2 gets: 10.244.2.0/24 (254 pods)                  │   │
│   │  Node 3 gets: 10.244.3.0/24 (254 pods)                  │   │
│   │  ...                                                    │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│   Service Network (ClusterIP addresses):                        │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  10.96.0.0/12                                           │   │
│   │  └─ ~1 million possible service IPs                     │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### See Your Cluster's CIDRs

```bash
# See the pod CIDR
kubectl cluster-info dump | grep -m 1 cluster-cidr

# See pod IPs (from the pod CIDR)
kubectl get pods -o wide

# See service IPs (from the service CIDR)
kubectl get svc
```

---

## Part 4: Common Scenarios

### What Happens If You Run Out of IPs?

```text
┌─────────────────────────────────────────────────────────────────┐
│              IP ADDRESS EXHAUSTION                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Your home network: 192.168.1.0/24 (254 usable)                │
│                                                                 │
│   Devices 1-254: Connect successfully ✓                         │
│   Device 255+:   "No IP available!" ✗                           │
│                                                                 │
│   What happens:                                                 │
│   • Device gets NO IP address                                   │
│   • Or gets a "link-local" IP (169.254.x.x)                     │
│   • Cannot connect to network or internet                       │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   Solutions:                                                    │
│   1. Use larger subnet (/16 instead of /24)                     │
│   2. Create multiple subnets (VLANs)                            │
│   3. Shorten DHCP lease time (recycle IPs faster)               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### Private IP Ranges (RFC 1918)

These IPs are reserved for internal networks and won't work on the internet:

```text
┌─────────────────────────────────────────────────────────────────┐
│              PRIVATE IP RANGES                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Range                    CIDR           # of Addresses        │
│   ─────────────────────    ──────         ──────────────        │
│   10.0.0.0 - 10.255.255.255    10.0.0.0/8      16 million       │
│   172.16.0.0 - 172.31.255.255  172.16.0.0/12   1 million        │
│   192.168.0.0 - 192.168.255.255 192.168.0.0/16 65,534           │
│                                                                 │
│   ─────────────────────────────────────────────────────────     │
│                                                                 │
│   Common uses:                                                  │
│   • 192.168.x.x → Home routers (most common)                    │
│   • 10.x.x.x    → Kubernetes pods, corporate networks           │
│   • 172.16-31.x → Docker default networks                       │
│                                                                 │
│   These IPs need NAT to reach the internet!                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Quick Reference

### CIDR Cheat Sheet

| CIDR | Netmask | Usable IPs | Common Use |
|------|---------|------------|------------|
| /8 | 255.0.0.0 | 16,777,214 | Large enterprise |
| /12 | 255.240.0.0 | 1,048,574 | K8s service network |
| /16 | 255.255.0.0 | 65,534 | K8s pod network |
| /24 | 255.255.255.0 | 254 | Home/office network |
| /32 | 255.255.255.255 | 1 | Single host |

### DHCP Quick Facts

| Term | Meaning |
|------|---------|
| **DHCP Server** | Assigns IP addresses (usually your router) |
| **Lease** | How long you keep an IP |
| **DORA** | Discover, Offer, Request, Acknowledge |
| **Renewal** | Getting the same IP before lease expires |

### Key Formulas

```text
# Calculate usable addresses from CIDR
Usable IPs = 2^(32 - CIDR) - 2

Examples:
/24: 2^(32-24) - 2 = 2^8 - 2 = 256 - 2 = 254
/16: 2^(32-16) - 2 = 2^16 - 2 = 65,536 - 2 = 65,534
/8:  2^(32-8) - 2 = 2^24 - 2 = 16,777,216 - 2 = 16,777,214
```

---

## Summary

| Concept | What It Does |
|---------|--------------|
| **DHCP** | Automatically assigns IP addresses to devices |
| **CIDR** | Compact notation for IP + network size (e.g., 10.0.0.0/16) |
| **/24** | 254 usable addresses (typical home network) |
| **/16** | 65,534 usable addresses (Kubernetes pods) |
| **Smaller /number** | Bigger network (more addresses) |
| **Larger /number** | Smaller network (fewer addresses) |

---

**Back to:** [0.5 Networking Basics](./0.5_networking_basics.md)
