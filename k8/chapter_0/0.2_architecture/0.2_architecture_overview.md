# 0.2 Kubernetes Architecture Overview

> Now that your cluster is running, let's SEE the components in action

---

## Prerequisites

- Completed [0.7 First Cluster](../0.7_first_cluster.md) - your kind cluster is running
- `kubectl get nodes` shows 3 nodes (1 control-plane, 2 workers)

---

## The Big Picture

Your cluster has two types of nodes:

```text
┌─────────────────────────────────────────────────────────────────┐
│                  YOUR KIND CLUSTER                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   CONTROL PLANE NODE                                            │
│   (playground-control-plane)                                    │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  API Server    - Front door, handles all requests       │   │
│   │  etcd          - Database, stores cluster state         │   │
│   │  Scheduler     - Decides WHERE pods run                 │   │
│   │  Controller    - Watches and fixes things               │   │
│   │  Manager                                                │   │
│   └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              │ "Run this pod"                   │
│                              ▼                                  │
│   WORKER NODES                                                  │
│   ┌──────────────────────┐  ┌──────────────────────┐           │
│   │  playground-worker   │  │  playground-worker2  │           │
│   │  ┌────────────────┐  │  │  ┌────────────────┐  │           │
│   │  │ kubelet        │  │  │  │ kubelet        │  │           │
│   │  │ (node agent)   │  │  │  │ (node agent)   │  │           │
│   │  └────────────────┘  │  │  └────────────────┘  │           │
│   │  ┌────────────────┐  │  │  ┌────────────────┐  │           │
│   │  │ YOUR PODS      │  │  │  │ YOUR PODS      │  │           │
│   │  │ run here       │  │  │  │ run here       │  │           │
│   │  └────────────────┘  │  │  └────────────────┘  │           │
│   └──────────────────────┘  └──────────────────────┘           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## See It Yourself

Run these commands to see your cluster components:

```bash
# See all nodes
kubectl get nodes

# See system pods (the K8s components!)
kubectl get pods -n kube-system

# See more details
kubectl get pods -n kube-system -o wide
```

You should see something like:

```text
NAME                                         READY   STATUS    NODE
coredns-6f6b679f8f-xxxxx                     1/1     Running   control-plane
coredns-6f6b679f8f-yyyyy                     1/1     Running   control-plane
etcd-playground-control-plane                1/1     Running   control-plane
kube-apiserver-playground-control-plane      1/1     Running   control-plane
kube-controller-manager-playground-...       1/1     Running   control-plane
kube-scheduler-playground-control-plane      1/1     Running   control-plane
kube-proxy-xxxxx                             1/1     Running   (each node)
kindnet-xxxxx                                1/1     Running   (each node)
```

**These ARE the Kubernetes components we'll explore!**

---

## Component Quick Reference

| Component | What It Does | Where It Runs |
|-----------|-------------|---------------|
| **API Server** | Front door - all requests go through it | Control Plane |
| **etcd** | Database - stores everything | Control Plane |
| **Scheduler** | Decides which node runs a pod | Control Plane |
| **Controller Manager** | Watches and fixes state | Control Plane |
| **kubelet** | Manages pods on each node | Every Node |
| **kube-proxy** | Handles networking | Every Node |
| **CoreDNS** | Cluster DNS for service discovery | Control Plane |

---

## Hands-On Exploration Guides

Explore each component by playing with it:

| Guide | What You'll Learn |
|-------|-------------------|
| [0.2a API Server](./0.2a_explore_api_server.md) | How kubectl talks to K8s, REST API, authentication |
| [0.2b etcd](./0.2b_explore_etcd.md) | Where cluster state is stored, what happens if it dies |
| [0.2c Scheduler](./0.2c_explore_scheduler.md) | How K8s decides where pods run |
| [0.2d Controller Manager](./0.2d_explore_controller_manager.md) | Watch-and-fix loops, self-healing |
| [0.2e kubelet](./0.2e_explore_kubelet.md) | Node agent, pod lifecycle |
| [0.2f Pods](./0.2f_explore_pods.md) | Single and multi-container pods |
| [0.2g Podman Desktop](./0.2g_explore_via_podman_desktop.md) | Visual exploration via UI (no typing!) |

---

## The Flow: What Happens When You Create a Pod

```text
You: kubectl run nginx --image=nginx
        │
        ▼
   ┌──────────┐
   │1. API    │  Receives request, validates, stores in etcd
   │  Server  │
   └────┬─────┘
        │
        ▼
   ┌──────────┐
   │2. etcd   │  "New pod object created, no node assigned"
   │          │
   └────┬─────┘
        │
        ▼
   ┌──────────┐
   │3. Sched- │  "This pod needs a node... worker2 has space"
   │   uler   │  Updates pod with nodeName=worker2
   └────┬─────┘
        │
        ▼
   ┌──────────┐
   │4. kubelet│  (on worker2) "I see a pod assigned to me"
   │          │  Pulls image, starts container
   └────┬─────┘
        │
        ▼
   Pod is Running!
```

We'll explore each step hands-on in the guides above.

---

**Start with:** [0.2a Explore API Server](./0.2a_explore_api_server.md)
