# 0.2g Explore Kubernetes via Podman Desktop

> Visual exploration - see your cluster without typing commands

---

## Why Use a UI?

While `kubectl` is powerful, sometimes you want to:
- **See everything at a glance** - No need to remember commands
- **Click instead of type** - Faster for exploration
- **Visual feedback** - See status with colors, not text

Podman Desktop (v1.24+) has built-in Kubernetes support!

---

## Part 1: Built-in Kubernetes Features

Podman Desktop already shows your Kubernetes cluster. Let's explore what's built-in.

### Step 1: Open Podman Desktop

Launch the app. You should see the dashboard.

### Step 2: Check Your Kubernetes Context

Look at the **bottom status bar**:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Podman Desktop                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [Dashboard] [Containers] [Pods] [Images] [Volumes]             │
│                                                                 │
│  ...                                                            │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  ● Podman running    |    Kubernetes: kind-playground ✓         │
└─────────────────────────────────────────────────────────────────┘
                                    ↑
                           Your cluster context!
```

Click on the Kubernetes context to switch between clusters if you have multiple.

### Step 3: View Pods

Click **"Pods"** in the left sidebar:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Pods                                                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Filter: [All namespaces ▼]  [Search...]                        │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ ● coredns-xxx              kube-system    Running         │  │
│  │   Container: coredns       Age: 2h                        │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ ● etcd-playground-control-plane    kube-system   Running  │  │
│  │   Container: etcd                  Age: 2h                │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ ● kube-apiserver-xxx       kube-system    Running         │  │
│  │   Container: kube-apiserver        Age: 2h                │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

These are the same pods `kubectl get pods -A` shows!

---

## Part 2: Install the Kubernetes Dashboard Extension

For a richer experience, install the official Kubernetes Dashboard extension.

### Step 1: Open Extensions

Go to **Settings** (gear icon) → **Extensions**

Or click the **puzzle piece icon** in the sidebar.

### Step 2: Install the Extension

1. Click **"Install a new extension from OCI Image"**
2. Enter this image:
   ```
   ghcr.io/podman-desktop/podman-desktop-extension-kubernetes-dashboard:latest
   ```
3. Click **Install**

```text
┌─────────────────────────────────────────────────────────────────┐
│  Install Extension from OCI Image                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Image name:                                                    │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ ghcr.io/podman-desktop/podman-desktop-extension-          │  │
│  │ kubernetes-dashboard:latest                               │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│                                      [Cancel]  [Install]        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### Step 3: Wait for Installation

The extension will download and install. You'll see a new **"Kubernetes"** section in the sidebar!

---

## Part 3: Explore the Kubernetes Dashboard

After installation, you'll have a comprehensive Kubernetes view.

### The Dashboard Overview

Click **Kubernetes** in the sidebar:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Kubernetes Dashboard                                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Context: kind-playground                    Namespace: all ▼   │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │     NODES       │  │      PODS       │  │   DEPLOYMENTS   │  │
│  │       3         │  │       12        │  │        2        │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │    SERVICES     │  │    SECRETS      │  │   CONFIGMAPS    │  │
│  │       5         │  │       8         │  │        4        │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

This is like running multiple `kubectl get` commands at once!

---

## Part 4: Explore Each Component Visually

### See Nodes (Where kubelet Runs)

Click **Nodes**:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Nodes                                                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  NAME                          STATUS    ROLES          AGE     │
│  ───────────────────────────────────────────────────────────    │
│  ● playground-control-plane    Ready     control-plane  2h      │
│  ● playground-worker           Ready     <none>         2h      │
│  ● playground-worker2          Ready     <none>         2h      │
│                                                                 │
│  Click any node to see details...                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Click a node** to see:
- CPU/Memory capacity
- Conditions (Ready, MemoryPressure, etc.)
- Pods running on this node
- Labels and annotations

This shows what the **kubelet** reports about each node!

### See Pods (The Containers)

Click **Pods**:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Pods                                              kube-system ▼│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  NAME                                 STATUS    NODE            │
│  ─────────────────────────────────────────────────────────────  │
│  ● etcd-playground-control-plane     Running   control-plane    │
│  ● kube-apiserver-playground-...     Running   control-plane    │
│  ● kube-controller-manager-...       Running   control-plane    │
│  ● kube-scheduler-playground-...     Running   control-plane    │
│  ● coredns-xxx                       Running   worker           │
│  ● kindnet-xxx                       Running   worker           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Look!** You can see all the components we explored:
- **etcd** - The database
- **kube-apiserver** - The API Server
- **kube-controller-manager** - The Controller Manager
- **kube-scheduler** - The Scheduler

All visible without typing `kubectl get pods -n kube-system`!

### Pod Details

Click on any pod to see:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Pod: kube-apiserver-playground-control-plane                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [Summary]  [YAML]  [Logs]  [Terminal]                          │
│                                                                 │
│  Status: Running                                                │
│  Namespace: kube-system                                         │
│  Node: playground-control-plane                                 │
│  IP: 10.244.0.2                                                 │
│                                                                 │
│  Containers:                                                    │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │  kube-apiserver                                           │  │
│  │  Image: registry.k8s.io/kube-apiserver:v1.31.0            │  │
│  │  State: Running                                           │  │
│  │  Ports: 6443/TCP                                          │  │
│  │                                       [Logs] [Terminal]   │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Try these buttons:**
- **Logs** - See container logs (like `kubectl logs`)
- **Terminal** - Open a shell inside (like `kubectl exec -it`)
- **YAML** - See the raw YAML definition

### See Deployments (Controller Manager Creates These)

Click **Deployments**:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Deployments                                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  NAME          NAMESPACE      READY   UP-TO-DATE   AVAILABLE    │
│  ────────────────────────────────────────────────────────────   │
│  coredns       kube-system    2/2     2            2            │
│  nginx-demo    default        3/3     3            3            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

Click a deployment to see:
- The ReplicaSet it created
- The Pods it manages
- Scaling controls (increase/decrease replicas!)

### See Services (How Pods Are Exposed)

Click **Services**:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Services                                                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  NAME         NAMESPACE      TYPE        CLUSTER-IP     PORT    │
│  ────────────────────────────────────────────────────────────   │
│  kubernetes   default        ClusterIP   10.96.0.1      443     │
│  kube-dns     kube-system    ClusterIP   10.96.0.10     53      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### See Secrets and ConfigMaps

These store configuration and sensitive data:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Secrets                                        kube-system ▼   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  NAME                          TYPE                    DATA     │
│  ────────────────────────────────────────────────────────────   │
│  default-token-xxx             kubernetes.io/token     3        │
│  etcd-certs                    Opaque                  4        │
│                                                                 │
│  ⚠ These contain sensitive data - be careful in production!    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Part 5: Hands-On - Watch Self-Healing in the UI

Let's see the Controller Manager's self-healing visually!

### Step 1: Create a Deployment

In terminal:
```bash
kubectl create deployment ui-test --image=nginx:alpine --replicas=3
```

### Step 2: Watch in Podman Desktop

Go to **Pods** in the dashboard. You'll see 3 new pods appear:

```text
● ui-test-xxx-aaa    Running    default
● ui-test-xxx-bbb    Running    default
● ui-test-xxx-ccc    Running    default
```

### Step 3: Delete a Pod via UI

1. Click on one of the `ui-test` pods
2. Click the **Delete** button (trash icon)
3. Confirm deletion

### Step 4: Watch Self-Healing

**Immediately** you'll see:
- The deleted pod disappears
- A **new pod** appears to replace it!

The Controller Manager noticed only 2 pods instead of 3 and created a new one.

**This is the same thing we did with `kubectl delete pod`**, but now you can SEE it happen!

### Step 5: Cleanup

```bash
kubectl delete deployment ui-test
```

---

## Part 6: Hands-On - View API Server Logs

### Step 1: Find the API Server Pod

1. Go to **Pods**
2. Filter by namespace: **kube-system**
3. Find `kube-apiserver-playground-control-plane`

### Step 2: View Logs

1. Click on the pod
2. Click the **Logs** tab
3. Watch real-time API requests!

```text
┌─────────────────────────────────────────────────────────────────┐
│  Logs: kube-apiserver-playground-control-plane                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  I0115 10:23:45.123456 1 httplog.go:132] "HTTP" verb="GET"      │
│    URI="/api/v1/namespaces/default/pods" latency="1.2ms"        │
│                                                                 │
│  I0115 10:23:46.234567 1 httplog.go:132] "HTTP" verb="LIST"     │
│    URI="/api/v1/nodes" latency="0.8ms"                          │
│                                                                 │
│  [Auto-refresh ✓]                                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

Every `kubectl` command you run appears here!

---

## Part 7: Hands-On - View etcd Pod

### Find etcd

1. Go to **Pods** → **kube-system**
2. Find `etcd-playground-control-plane`

### View Details

Click on it to see:
- Container image: `registry.k8s.io/etcd:3.5.x`
- Command: etcd server parameters
- Volumes: Where data is stored

This is the same etcd we explored in [0.2b](./0.2b_explore_etcd.md)!

---

## Part 8: Hands-On - View Scheduler Events

### Create a Pod

```bash
kubectl run schedule-test --image=nginx:alpine
```

### Watch Events

In Podman Desktop, you can see events that show:
1. **Scheduled** - Scheduler picked a node
2. **Pulling** - kubelet pulling image
3. **Started** - Container running

This is what we explored in [0.2c](./0.2c_explore_scheduler.md), but visual!

```bash
kubectl delete pod schedule-test
```

---

## UI vs CLI: Quick Comparison

| Task | kubectl | Podman Desktop |
|------|---------|----------------|
| List pods | `kubectl get pods` | Click "Pods" |
| Pod details | `kubectl describe pod X` | Click the pod |
| View logs | `kubectl logs X` | Click pod → Logs tab |
| Exec into pod | `kubectl exec -it X -- sh` | Click pod → Terminal |
| Delete pod | `kubectl delete pod X` | Click pod → Delete |
| Scale deployment | `kubectl scale deploy X` | Click deploy → Scale |
| View YAML | `kubectl get pod X -o yaml` | Click pod → YAML tab |

**Both show the same data** - choose what feels comfortable!

---

## Key Takeaways

1. **Podman Desktop has built-in K8s support** - View pods, images, containers
2. **Dashboard extension adds more** - Nodes, deployments, services, secrets
3. **Same data as kubectl** - Just presented visually
4. **Great for exploration** - Click around to learn
5. **Use both** - CLI for scripts, UI for exploring

---

## Troubleshooting

### "No Kubernetes context found"

Your kubeconfig might not be set:
```bash
# Check if kind cluster exists
kind get clusters

# If it exists, set context
kubectl config use-context kind-playground
```

### Extension won't install

Try the "next" version:
```
ghcr.io/podman-desktop/podman-desktop-extension-kubernetes-dashboard:next
```

### Can't see pods

1. Check the namespace filter (top right)
2. Make sure "All namespaces" is selected
3. Verify your cluster is running: `kubectl get nodes`

---

## Quick Reference

```text
Podman Desktop Kubernetes Features:

Built-in:
├── Pods view (left sidebar)
├── Context switching (bottom bar)
└── Container logs/terminal

Dashboard Extension:
├── Nodes
├── Pods (all namespaces)
├── Deployments
├── Services
├── Secrets
├── ConfigMaps
├── Jobs/CronJobs
└── PersistentVolumeClaims

Install extension:
ghcr.io/podman-desktop/podman-desktop-extension-kubernetes-dashboard:latest
```

---

**Back to:** [0.2 Architecture Overview](./0.2_architecture_overview.md)

**Sources:**
- [Podman Desktop Official](https://podman-desktop.io/)
- [Kubernetes Dashboard Extension](https://github.com/podman-desktop/extension-kubernetes-dashboard)
