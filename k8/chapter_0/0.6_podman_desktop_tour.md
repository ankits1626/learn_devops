# 0.6d Podman Desktop Tour

> A hands-on walkthrough of Podman Desktop after setup

---

## Prerequisites

- Completed [0.6 Mac Setup](./0.6_mac_setup.md)
- Podman Desktop installed (`brew install --cask podman-desktop`)
- Podman machine running (`podman machine start`)

---

## Port Allocation for This Course

To avoid conflicts with other projects, we use ports **30080-30099** for our playground:

| Port | Service | Description |
|------|---------|-------------|
| 30080 | k8s-playground-nginx | Web server demo |
| 30081 | k8s-playground-redis | Redis cache |
| 30082 | k8s-playground-app | Custom app (future) |
| 30083-30099 | Reserved | Future chapters |

---

## Step 1: Launch Podman Desktop

Open Podman Desktop from your Applications folder or Spotlight.

You'll see the **Dashboard**:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Podman Desktop - Dashboard                                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  Podman                              ● Running          │    │
│  │  podman-machine-default                                 │    │
│  │  4 CPUs | 4 GiB | 60 GiB                                │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Containers: 0    Pods: 0    Images: 0    Volumes: 0            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

The green **Running** indicator confirms your Podman machine is active.

---

## Step 2: Run Some Containers

Open your terminal and run these commands to create some containers to explore:

```bash
# Create an nginx web server
podman run -d \
  --name k8s-playground-nginx \
  -p 30080:80 \
  nginx:alpine

# Create a redis instance
podman run -d \
  --name k8s-playground-redis \
  -p 30081:6379 \
  redis:alpine
```

Now go back to Podman Desktop and click **Containers** in the sidebar.

---

## Step 3: Explore the Containers Tab

```text
┌─────────────────────────────────────────────────────────────────┐
│  Containers (2 running)                                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ ● k8s-playground-nginx   nginx:alpine   30080:80        │    │
│  │   Created 30 seconds ago                 Running        │    │
│  │   [Stop] [Restart] [Delete] [Terminal] [Logs]           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ ● k8s-playground-redis   redis:alpine   30081:6379      │    │
│  │   Created 20 seconds ago                 Running        │    │
│  │   [Stop] [Restart] [Delete] [Terminal] [Logs]           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### Try These Actions:

**1. View Container Details**
- Click on **k8s-playground-nginx**
- See environment variables, ports, volumes, and more

**2. View Logs**
- Click the **Logs** button
- You'll see nginx access/error logs

**3. Open Terminal (Shell Into Container)**
- Click **Terminal**
- You get a shell inside the container
- Try: `ls /usr/share/nginx/html/`
- Type `exit` to leave

**4. Test nginx is Working**
- Open browser: `http://localhost:30080`
- You should see the nginx welcome page

---

## Step 4: Explore the Images Tab

Click **Images** in the sidebar:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Images (2)                                                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  nginx:alpine                                           │   │
│  │  Size: 43 MB     Created: 2 weeks ago                   │   │
│  │  [Run] [Push] [Delete]                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  redis:alpine                                           │   │
│  │  Size: 41 MB     Created: 1 week ago                    │   │
│  │  [Run] [Push] [Delete]                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  [Pull an image]                                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### Try This:

**Pull a New Image**
1. Click **Pull an image**
2. Type `busybox` and press Enter
3. Watch it download
4. Now you have 3 images

---

## Step 5: Check Machine Settings

Go to **Settings** (gear icon) → **Resources**:

```text
┌────────────────────────────────────────────────────────────────┐
│  Resources                                                     │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  Podman Machine                                                │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                         │   │
│  │  podman-machine-default              ● Running          │   │
│  │                                                         │   │
│  │  CPUs: 4                                                │   │
│  │  Memory: 4 GiB                                          │   │
│  │  Disk: 60 GiB                                           │   │
│  │  Rootful: Yes  ← Required for kind!                     │   │
│  │                                                         │   │
│  │  [Stop]  [Restart]  [Delete]                            │   │
│  │                                                         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

**Verify:**
- Rootful should be **Yes** (required for kind)
- CPUs should be **4** (minimum for K8s)
- Memory should be **4 GiB** (minimum for K8s)

---

## Step 6: Create Your Kubernetes Cluster

Now let's create the kind cluster and see it in Podman Desktop.

In terminal:

```bash
# Make sure you have the config
mkdir -p ~/k8s-playground
cd ~/k8s-playground

# Create kind-config.yaml if it doesn't exist
cat > kind-config.yaml << 'EOF'
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
  - role: control-plane
    extraPortMappings:
      - containerPort: 30080
        hostPort: 30080
      - containerPort: 30081
        hostPort: 30081
  - role: worker
  - role: worker
EOF

# Create the cluster
kind create cluster --name playground --config kind-config.yaml --wait 60s
```

---

## Step 7: See the Cluster in Podman Desktop

Go back to **Containers** tab:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Containers (5 running)                                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ● k8s-playground-nginx       nginx:alpine         Running     │
│  ● k8s-playground-redis       redis:alpine         Running     │
│  ● playground-control-plane   kindest/node:v1.31   Running     │
│  ● playground-worker          kindest/node:v1.31   Running     │
│  ● playground-worker2         kindest/node:v1.31   Running     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**The kind cluster nodes are visible as containers!**

- `playground-control-plane` - The K8s brain (API server, scheduler, etc.)
- `playground-worker` - Where your pods will run
- `playground-worker2` - Another worker node

---

## Step 8: Explore the Kubernetes Tab

Click **Kubernetes** in the sidebar:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Kubernetes                                                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Current Context: kind-playground                               │
│                                                                 │
│  Nodes (3)                                                      │
│  ├── playground-control-plane    Ready    control-plane         │
│  ├── playground-worker           Ready    <none>                │
│  └── playground-worker2          Ready    <none>                │
│                                                                 │
│  Namespaces                                                     │
│  ├── default                                                    │
│  ├── kube-system                                                │
│  ├── kube-public                                                │
│  └── local-path-storage                                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

You can browse:
- **Nodes** - Your cluster machines
- **Namespaces** - Logical divisions in the cluster
- **Pods** - Running containers (check kube-system for system pods)
- **Deployments** - Application definitions
- **Services** - Network endpoints

---

## Step 9: View System Pods

In the Kubernetes tab, look at pods in the `kube-system` namespace:

```text
┌─────────────────────────────────────────────────────────────────┐
│  Pods - kube-system                                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  coredns-6f6b679f8f-xxxxx           Running   control-plane     │
│  coredns-6f6b679f8f-yyyyy           Running   control-plane     │
│  etcd-playground-control-plane      Running   control-plane     │
│  kube-apiserver-playground-...      Running   control-plane     │
│  kube-controller-manager-...        Running   control-plane     │
│  kube-proxy-xxxxx                   Running   worker            │
│  kube-proxy-yyyyy                   Running   worker2           │
│  kube-proxy-zzzzz                   Running   control-plane     │
│  kube-scheduler-playground-...      Running   control-plane     │
│  kindnet-xxxxx                      Running   (each node)       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**These are the K8s architecture components you learned about!**
- `etcd` - The database
- `kube-apiserver` - The API server
- `kube-controller-manager` - Manages controllers
- `kube-scheduler` - Decides where pods run
- `coredns` - Cluster DNS
- `kube-proxy` - Networking rules (one per node)
- `kindnet` - CNI networking (one per node)

---

## Step 10: Cleanup

When done experimenting, clean up the standalone containers:

```bash
# Remove the playground containers (not the kind cluster)
podman rm -f k8s-playground-nginx k8s-playground-redis

# Verify
podman ps
# Should only show the kind cluster nodes
```

**Keep the kind cluster** - you'll use it in the next chapters!

---

## Quick Reference: What's Where in Podman Desktop

| Tab | What You See |
|-----|--------------|
| **Dashboard** | Overview, machine status |
| **Containers** | All running containers (including kind nodes) |
| **Pods** | Podman pods (not K8s pods) |
| **Images** | Downloaded container images |
| **Volumes** | Persistent storage |
| **Kubernetes** | K8s cluster resources |
| **Settings** | Machine config, extensions |

---

## Exploration Checklist

Try these before moving on:

- [ ] See Podman machine running (Dashboard)
- [ ] Run `k8s-playground-nginx` container
- [ ] View container logs in Podman Desktop
- [ ] Open terminal into a container
- [ ] Visit `http://localhost:30080` in browser
- [ ] Pull a new image (busybox)
- [ ] Create kind cluster
- [ ] See kind nodes as containers
- [ ] Browse Kubernetes resources (nodes, pods)
- [ ] Find the kube-apiserver pod in kube-system
- [ ] Clean up test containers

---

## Terminal Equivalents

Everything you did in Podman Desktop can also be done in terminal:

```bash
# List containers
podman ps

# View logs
podman logs k8s-playground-nginx

# Shell into container
podman exec -it k8s-playground-nginx sh

# List images
podman images

# Pull image
podman pull busybox

# Kubernetes
kubectl get nodes
kubectl get pods -A
kubectl get pods -n kube-system
```

---

**Back to:** [0.6 Mac Setup](./0.6_mac_setup.md) | **Next:** [0.7 Your First Cluster](./0.7_first_cluster.md)
